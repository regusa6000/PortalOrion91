<nb-card [nbSpinner]="loading" nbSpinnerStatus="primary">
  <nb-card-header>Categorias Por Meses</nb-card-header>
  <nb-card-body style="height: 100%;">

    <nb-select placeholder="Seleccione Tienda: " (selectedChange)="buscarTienda($event)">
      <nb-option *ngFor="let tienda of tiendas" [value]="tienda.variable">{{ tienda.name }}</nb-option>
    </nb-select><br><br>

    <div class="table-responsive cnstr-record product-tbl">
      <table class="table table-bordered heading-hvr">
        <thead>
          <tr>
            <th> </th>
            <th>Id Categoria</th>
            <th>Categoria</th>
            <th>ENERO</th>
            <th>FEBRERO</th>
            <th>MARZO</th>
            <th>ABRIL</th>
            <th>MAYO</th>
            <th>JUNIO</th>
            <th>JULIO</th>
            <th>AGOSTO</th>
            <th>SEPTIEMBRE</th>
            <th>OCTUBRE</th>
            <th>NOVIEMBRE</th>
            <th>DICIEMBRE</th>
          </tr>
        </thead>
        <tbody *ngFor="let cat of listadoCategorias; let i = index">
          <tr>
            <td align="center">
                <nb-icon icon="maximize-outline" pack="eva" class="expand-row" *ngIf="!hideme[i]" (click)="showLinea(i)"></nb-icon>
                <nb-icon icon="minimize-outline" pack="eva" class="expand-row" *ngIf="hideme[i]" (click)="hideme[i] = !hideme[i]"></nb-icon>
            </td>
            <td>{{cat.id_category}}</td>
            <td>{{cat.name}}</td>
            <td align="right">{{cat.ENERO}}€</td>
            <td align="right">{{cat.FEBRERO}}€</td>
            <td align="right">{{cat.MARZO}}€</td>
            <td align="right">{{cat.ABRIL}}€</td>
            <td align="right">{{cat.MAYO}}€</td>
            <td align="right">{{cat.JUNIO}}€</td>
            <td align="right">{{cat.JULIO}}€</td>
            <td align="right">{{cat.AGOSTO}}€</td>
            <td align="right">{{cat.SEPTIEMBRE}}€</td>
            <td align="right">{{cat.OCTUBRE}}€</td>
            <td align="right">{{cat.NOVIEMBRE}}€</td>
            <td align="right">{{cat.DICIEMBRE}}€</td>
          </tr>

          <tr [hidden]="!hideme[i]" class="sub-table no-bg" style="width: 100%;">
            <td align="center"> </td>
            <td align="center" colspan="14">
              <div style="margin: auto;">
                <br><br><canvas id="canvas-{{ cat.id_category }}">{{ chart }}</canvas><br><br>
              </div>
            </td>
          </tr>


        </tbody>
      </table>
    </div>

  </nb-card-body>
</nb-card>
